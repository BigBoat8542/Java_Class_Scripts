%!PS-Adobe-3.0
%%Creator: groff version 1.18.1
%%CreationDate: Tue May 10 22:00:11 2005
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%DocumentSuppliedResources: procset grops 1.18 1
%%Pages: 4
%%PageOrder: Ascend
%%Orientation: Landscape
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.18 1
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/Fk{
setcmykcolor fill
}bind def
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/Ck/setcmykcolor load def
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS true def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Courier@0 ENC0/Courier RE/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0
ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(assignments/3/support-\214les)36 60 Q/F1 11
/Times-Bold@0 SF(SymbolT)208.618 E(able.ja)-1.012 E -.11(va)-.275 G F0
-.15(Pa)291.388 G(ge 1).15 E/F2 7/Courier@0 SF 8.4(1i)48.6 92.4 S
(mport java.util.*;)-8.4 E(2)48.6 100.8 Q 8.4(3/)48.6 109.2 S(****)-8.4
E 12.6(4*)48.6 117.6 S 12.6(5*)48.6 126 S(SymbolTable is a datatype for\
 a tree structured table, where each node in)-8.4 E 12.6(6*)48.6 134.4 S
(the tree represents a program scope.)-8.4 E
(The overall tree structure represents)8.4 E 12.6(7*)48.6 142.8 S
(the scope nesting of a program.)-8.4 E
(For example, consider the following)8.4 E 12.6(8*)48.6 151.2 S
(\(Pascal\) program:)-8.4 E 260.4 12.6(9* <)48.6 159.6 T(p><pre>)-12.6 E
29.4(10 program)44.4 168 R 42(11 var)44.4 176.4 R(p1,p2,p3: integer;)4.2
E(12)44.4 184.8 Q 42(13 procedure)44.4 193.2 R
(A\(a1: integer; a2: real\);)4.2 E 54.6(14 var)44.4 201.6 R
(a3: integer;)4.2 E 42(15 begin)44.4 210 R 54.6(16 a3)44.4 218.4 R
(:= a1 + a2;)4.2 E 42(17 end)44.4 226.8 R(A;)4.2 E 42(18 procedure)44.4
235.2 R(B\(b1: real; b2: integer\);)4.2 E 50.4(19 var)44.4 243.6 R
(b3: integer;)4.2 E 50.4(20 procedure)44.4 252 R
(C\(c1: integer; c2: real\);)4.2 E 58.8(21 var)44.4 260.4 R
(c3: integer;)4.2 E 50.4(22 begin)44.4 268.8 R 63(23 c1)44.4 277.2 R
(:= c3;)4.2 E 63(24 c2)44.4 285.6 R(:= c1 * c3 / 10;)4.2 E 50.4(25 end)
44.4 294 R(C;)4.2 E 42(26 begin)44.4 302.4 R 50.4(27 b1)44.4 310.8 R
(:= b2 - b3;)4.2 E 42(28 end)44.4 319.2 R(B;)4.2 E 29.4(29 begin)44.4
327.6 R 42(30 p1)44.4 336 R(:= p2 - p3;)4.2 E 29.4(31 end)44.4 344.4 R
8.4(32 *)44.4 352.8 R(</pre><p>)285.6 E 8.4(33 *)44.4 361.2 R(An abstra\
ct depiction of the symbol table structure for this program is the)4.2 E
8.4(34 *)44.4 369.6 R(following:)4.2 E 8.4(35 *)44.4 378 R(<pre><p>)
289.8 E 33.6(36 program)44.4 386.4 R(symtab)4.2 E 29.4
(37 |---------------|)44.4 394.8 R 29.4(38 |)44.4 403.2 R 16.8
(null |<--|)25.2 F 29.4(39 |-------|-------|)44.4 411.6 R 29.4(|B)12.6 G
('s symtab)-29.4 E 29.4(40 |)44.4 420 R 4.2(p3 |)12.6 F 12.6(|||)29.4 G
(---------------|)-12.6 E 29.4(41 |-------|-------|)44.4 428.4 R 25.2
(|-----------o |<--|)12.6 F 29.4(42 |)44.4 436.8 R 29.4(|||)29.4 G 8.4
(-------|-------| |)-29.4 F 29.4(43 |-------|-------|)44.4 445.2 R 12.6
(|b)29.4 G 8.4 8.4(2| |)-12.6 H 29.4(|C)4.2 G('s symtab)-29.4 E 29.4
(44 |)44.4 453.6 R 12.6(B|o)12.6 G 8.4
(---------->|-------|-------| | |---------------|)-12.6 F 29.4
(45 |-------|-------|)44.4 462 R 25.2 4.2(... |)54.6 H 25.2
(-----------o |)-4.2 F 29.4(46 |)44.4 470.4 R 4.2(p1 |)12.6 F 29.4(||)
29.4 G 25.2(-------|-------| |-------|-------|)-29.4 F 29.4
(47 |-------|-------|)44.4 478.8 R 12.6(|C|o)29.4 G 8.4(---------->| c3)
-12.6 F 29.4(||)8.4 G 29.4(48 |)44.4 487.2 R 4.2(p2 |)12.6 F 29.4(||)
29.4 G 25.2(-------|-------| |-------|-------|)-29.4 F 29.4
(49 |-------|-------|)44.4 495.6 R 4.2(...)155.4 G 29.4(50 |)44.4 504 R
67.2 29.4(|| |)29.4 H(-------|-------|)-29.4 E 29.4
(51 |-------|-------|)44.4 512.4 R(A's symtab)46.2 E 29.4(52 |)44.4
520.8 R 12.6(A|o)12.6 G(---------->|---------------|)-12.6 E 29.4
(53 |-------|-------|)44.4 529.2 R 29.4(|o)29.4 G
(------------> back to program symtab)-29.4 E 130.2
(54 |-------|-------|)44.4 537.6 R 130.2(55 |)44.4 546 R 4.2(a1 |)12.6 F
(|)29.4 E 130.2(56 |-------|-------|)44.4 554.4 R 155.4(57 .)414.4 92.4
R 4.2(..)4.2 G 130.2(58 |-------|-------|)414.4 100.8 R 8.4(59 *)414.4
109.2 R(</pre><p>)285.6 E 8.4(60 *)414.4 117.6 R(Note that a number of \
structural details are omitted from this picture.)4.2 E 8.4(61 *)414.4
126 R
(What the picture depicts is the overall tree structure, and how it)4.2
E 8.4(62 *)414.4 134.4 R
(represents the nested scope structure of the program.)4.2 E
(The details that are)8.4 E 8.4(63 *)414.4 142.8 R
(shown are the following:)4.2 E 8.4(64 *)414.4 151.2 R(<p>)310.8 E 8.4
(65 *)414.4 159.6 R(\(1\) Each symtab in the tree has a parent pointer \
that links it to the)16.8 E 8.4(66 *)414.4 168 R
(symtab for the enclosing scope in the program.)33.6 E
(The symtab for the)8.4 E 8.4(67 *)414.4 176.4 R
(outermost scope has no parent.)33.6 E
(This topmost symbol table is referred)8.4 E 8.4(68 *)414.4 184.8 R
(to as "level 0".)33.6 E 8.4(69 *)414.4 193.2 R(<p>)310.8 E 8.4(70 *)
414.4 201.6 R(\(2\) The table at each level contains entries for all of\
 the identifiers)16.8 E 8.4(71 *)414.4 210 R
(defined in the program scope represented by that table.)33.6 E
(For example,)8.4 E 8.4(72 *)414.4 218.4 R
(the program symtab has entries for the variables p1, p2 and p3, and)
33.6 E 8.4(73 *)414.4 226.8 R(for procedures A and B.)33.6 E
(In turn, the symtab for procedure B's scope)8.4 E 8.4(74 *)414.4 235.2
R(has entries for parameters b1 and b2, local variable b3, and local)
33.6 E 8.4(75 *)414.4 243.6 R
(procedure C \(not all of which are shown in the picture\).)33.6 E 8.4
(76 *)414.4 252 R(<p>)310.8 E 8.4(77 *)414.4 260.4 R
(\(3\) Each entry that defines a new scope has a link to its own symbol)
16.8 E 8.4(78 *)414.4 268.8 R 4.2(table. For)33.6 F
(example, procedure B above is entered by name in the)4.2 E 8.4(79 *)
414.4 277.2 R(program symbol table.)33.6 E
(Since procedure B defines a scope of its own,)8.4 E 8.4(80 *)414.4
285.6 R(the entry for B points to a symbol table that contains the)33.6
E 8.4(81 *)414.4 294 R(identifiers declared within B's scope.)33.6 E
(Per point \(1\) above, B's)8.4 E 8.4(82 *)414.4 302.4 R
(symtab has a parent pointer back to the program symtab.)33.6 E 8.4
(83 *)414.4 310.8 R(<p>)310.8 E 8.4(84 *)414.4 319.2 R
(\(4\) The entries in the symtabs are depicted in an order other than)
16.8 E 8.4(85 *)414.4 327.6 R
(alphabetic to indicate that the body of a symbol table is probably)33.6
E 8.4(86 *)414.4 336 R 4.2(hashed. I.e.,)33.6 F
(entries are shown in an apparent hashing order, rather)4.2 E 8.4(87 *)
414.4 344.4 R(than sequentially or in some lexical order.)33.6 E
(Under any circumstances,)8.4 E 8.4(88 *)414.4 352.8 R
(users of the symtab abstraction may not assume any order for the)33.6 E
8.4(89 *)414.4 361.2 R(entries within a table.)33.6 E 8.4(90 *)414.4
369.6 R 8.4(91 *)414.4 378 R
(As noted, the picture above omits some structural details.)4.2 E
(In particular,)8.4 E 8.4(92 *)414.4 386.4 R
(all of the publicly accessible fields for a table entry are not shown.)
4.2 E(The)8.4 E 8.4(93 *)414.4 394.8 R(type SymbolTableEntry*is an abst\
ract type for the entries within a symtab.)4.2 E 8.4(94 *)414.4 403.2 R
(The general format of a symtab entry is the following:)4.2 E 8.4(95 *)
414.4 411.6 R(<pre><p>)289.8 E 8.4(96 *)414.4 420 R
(|-------------------------------|)58.8 E 8.4(97 *)414.4 428.4 R 37.8
(|s)58.8 G(ymbol name)-37.8 E(|)46.2 E 8.4(98 *)414.4 436.8 R
(|-------------------------------|)58.8 E 8.4(99 *)414.4 445.2 R 37.8
(|s)58.8 G(ymbol type)-37.8 E(|)46.2 E 8.4(100 *)410.2 453.6 R
(|-------------------------------|)58.8 E 8.4(101 *)410.2 462 R 130.2
(||)58.8 G 8.4(102 *)410.2 470.4 R 16.8(|o)58.8 G(ther information in)
-16.8 E(|)29.4 E 8.4(103 *)410.2 478.8 R 25.2(|e)58.8 G
(xtending classes)-25.2 E(|)33.6 E 8.4(104 *)410.2 487.2 R 130.2(||)58.8
G 8.4(105 *)410.2 495.6 R 58.8(|.)58.8 G 54.6(.. |)-58.8 F 8.4(106 *)
410.2 504 R 130.2(||)58.8 G 8.4(107 *)410.2 512.4 R
(|-------------------------------|)58.8 E 8.4(108 *)410.2 520.8 R
(</pre><p>)285.6 E 8.4(109 *)410.2 529.2 R(The name and type fields are\
 common to all symtab entries, the value of the)4.2 E 8.4(110 *)410.2
537.6 R(type be null.)4.2 E
(As an example, consider the following variable declaration)8.4 E 8.4
(111 *)410.2 546 R(from the program above:)4.2 E 8.4(112 *)410.2 554.4 R
(<p>)310.8 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(assignments/3/support-\214les)36 60 Q/F1 11
/Times-Bold@0 SF(SymbolT)208.618 E(able.ja)-1.012 E -.11(va)-.275 G F0
-.15(Pa)291.388 G(ge 2).15 E/F2 7/Courier@0 SF 8.4(113 *)40.2 92.4 R
(integer p1, p2, p3;)25.2 E 8.4(114 *)40.2 100.8 R(<p>)310.8 E 8.4
(115 *)40.2 109.2 R(This declaration is represented by three entries wi\
th names "p1", "p2", and)4.2 E 8.4(116 *)40.2 117.6 R
("p3", respectively.)4.2 E(The type for all three entries is integer.)
8.4 E 8.4(117 *)40.2 126 R(<p>)310.8 E 8.4(118 *)40.2 134.4 R(An import\
ant instance of other information is that for symbols which define)4.2 E
8.4(119 *)40.2 142.8 R 4.2(as)4.2 G 4.2(cope. For)-4.2 F
(example, consider the following procedure declaration from the)4.2 E
8.4(120 *)40.2 151.2 R(program above:)4.2 E 8.4(121 *)40.2 159.6 R(<p>)
310.8 E 8.4(122 *)40.2 168 R(procedure B\(real b1, integer b2\);)25.2 E
8.4(123 *)40.2 176.4 R(<p>)310.8 E 8.4(124 *)40.2 184.8 R(...)42 E 8.4
(125 *)40.2 193.2 R(<p>)310.8 E 8.4(126 *)40.2 201.6 R 4.2(As)4.2 G(ymt\
ab entry for the identifier B has the following values in the header:)
-4.2 E 8.4(127 *)40.2 210 R(<p>)310.8 E 8.4(128 *)40.2 218.4 R
(name = "B", type = void)21 E 8.4(129 *)40.2 226.8 R(<p>)310.8 E 8.4
(130 *)40.2 235.2 R(The entry also has a scope field, which is a refere\
nce to its own local)4.2 E 8.4(131 *)40.2 243.6 R(symbol table.)4.2 E
(The documentation for the FunctionEntry extension of)8.4 E 8.4(132 *)
40.2 252 R(SymbolTableEntry has further discussion.)4.2 E 8.4(133 *)40.2
260.4 R 8.4(134 */)40.2 268.8 R 4.2(135 public)40.2 277.2 R
(class SymbolTable {)4.2 E(136)40.2 285.6 Q 21(137 /**)40.2 294 R 25.2
(138 *)40.2 302.4 R(Allocate a new symtab of the given size.)4.2 E
(The size is the number of)8.4 E 25.2(139 *)40.2 310.8 R
(table entries \(not bytes\).)4.2 E
(All entries are initialized to null, the)8.4 E 25.2(140 *)40.2 319.2 R
(parent is initialized to null, and level to 0.)4.2 E
(Parent and level are)8.4 E 25.2(141 *)40.2 327.6 R
(only set to non-null/non-zero values when a SymbolTable is constructed)
4.2 E 25.2(142 *)40.2 336 R(with the newLevel method.)4.2 E 25.2(143 */)
40.2 344.4 R 21(144 public)40.2 352.8 R(SymbolTable\(int size\) {)4.2 E
37.8(145 entries)40.2 361.2 R 4.2(=n)4.2 G(ew HashMap\(size\);)-4.2 E
37.8(146 level)40.2 369.6 R 4.2(=0)4.2 G(;)-4.2 E 21(147 })40.2 378 R
(148)40.2 386.4 Q 21(149 /**)40.2 394.8 R 25.2(150 *)40.2 403.2 R
(Allocate a new symtab and add it as a new level to this symtab.)4.2 E
(The new)8.4 E 25.2(151 *)40.2 411.6 R
(level is linked into the existing symtab via the scope field of the)4.2
E 25.2(152 *)40.2 420 R
(given function entry, and the parent entry of this, as illustrated in)
4.2 E 25.2(153 *)40.2 428.4 R(the class documnentation.)4.2 E
(The level field of the the new symtab is set)8.4 E 25.2(154 *)40.2
436.8 R(to this.level+1.)4.2 E
(The return value is a reference to the new level.)8.4 E 25.2(155 */)
40.2 445.2 R 21(156 public)40.2 453.6 R
(SymbolTable newLevel\(FunctionEntry fe, int size\) {)4.2 E(157)40.2 462
Q 37.8(158 SymbolTable)40.2 470.4 R(newst;)4.2 E(159)40.2 478.8 Q 37.8
(160 /*)40.2 487.2 R 42(161 *)40.2 495.6 R
(Enter the given entry in the current level.)4.2 E 42(162 */)40.2 504 R
37.8(163 enter\(fe\);)40.2 512.4 R(164)40.2 520.8 Q 37.8(165 /*)40.2
529.2 R 42(166 *)40.2 537.6 R
(Create a new symtab for the new level, and link it into the)4.2 E 42
(167 *)40.2 546 R
(structure by pointing the info.proc.symtab field off to it.)4.2 E 42
(168 */)40.2 554.4 R 37.8(169 newst)410.2 92.4 R 4.2(=f)4.2 G
(e.scope = new SymbolTable\(size\);)-4.2 E(170)410.2 100.8 Q 37.8
(171 /*)410.2 109.2 R 42(172 *)410.2 117.6 R
(Link the parent and parententry fields of the new table to their)4.2 E
42(173 *)410.2 126 R(appropriate parent locations.)4.2 E 42(174 */)410.2
134.4 R 37.8(175 newst.parent)410.2 142.8 R 4.2(=t)4.2 G(his;)-4.2 E
(176)410.2 151.2 Q 37.8(177 /*)410.2 159.6 R 42(178 *)410.2 168 R
(Set the level of the new table to one greater than the parent level.)
4.2 E 42(179 */)410.2 176.4 R 37.8(180 newst.level)410.2 184.8 R 4.2(=l)
4.2 G(evel + 1;)-4.2 E(181)410.2 193.2 Q 37.8(182 return)410.2 201.6 R
(newst;)4.2 E(183)410.2 210 Q 21(184 })410.2 218.4 R(185)410.2 226.8 Q
21(186 /**)410.2 235.2 R 25.2(187 *)410.2 243.6 R
(Lookup an entry by name in this symtab.)4.2 E
(The symtab entry of the given)8.4 E 25.2(188 *)410.2 252 R
(name is returned, if found, else null is returned.)4.2 E
(The lookup algorithm)8.4 E 25.2(189 *)410.2 260.4 R
(is based on the symtab tree structure outlined above.)4.2 E
(Specifically,)8.4 E 25.2(190 *)410.2 268.8 R(<p>)294 E 25.2(191 *)410.2
277.2 R
(\(1\) Lookup first checks in the given symtab; if an entry of the)21 E
25.2(192 *)410.2 285.6 R(given name is found there, it is returned.)37.8
E 25.2(193 *)410.2 294 R(<p>)294 E 25.2(194 *)410.2 302.4 R(\(2\) If \(\
1\) fails, Lookup ascends through successive parent levels of)21 E 25.2
(195 *)410.2 310.8 R
(the given symtab, performing another look up at each level.)37.8 E(If)
8.4 E 25.2(196 *)410.2 319.2 R
(an entry of the given name is found at a parent level, it is)37.8 E
25.2(197 *)410.2 327.6 R 4.2(returned. Note)37.8 F
(that Lookup will return the entry from the)4.2 E 25.2(198 *)410.2 336 R
(youngest parent level in which it is found, even if one or more)37.8 E
25.2(199 *)410.2 344.4 R
(older parent levels also contain an entry of the same name.)37.8 E 25.2
(200 *)410.2 352.8 R(<p>)294 E 25.2(201 *)410.2 361.2 R
(\(3\) If the top level is reached without finding an entry of the)21 E
25.2(202 *)410.2 369.6 R(given name, null is returned.)37.8 E 25.2
(203 *)410.2 378 R(<p>)294 E 25.2(204 *)410.2 386.4 R
(This lookup algorithm is intended to model the open scope resolution)
4.2 E 25.2(205 *)410.2 394.8 R
(rule of most block structured programming languages.)4.2 E
(Viz., a reference)8.4 E 25.2(206 *)410.2 403.2 R
(to a symbol within an open scope is resolved by looking in the current)
4.2 E 25.2(207 *)410.2 411.6 R(scope, and if not found there, successiv\
e levels of enclosing scopes are)4.2 E 25.2(208 *)410.2 420 R(searched.)
4.2 E 25.2(209 *)410.2 428.4 R 25.2(210 */)410.2 436.8 R 21(211 public)
410.2 445.2 R(SymbolTableEntry lookup\(String name\) {)4.2 E 37.8
(212 int)410.2 453.6 R(i;)4.2 E 37.8(213 SymbolTable)410.2 462 R(st;)4.2
E 37.8(214 SymbolTableEntry)410.2 470.4 R(se;)4.2 E(215)410.2 478.8 Q
37.8(216 /*)410.2 487.2 R 42(217 *)410.2 495.6 R
(For this and each parent level, search for an entry of the given)4.2 E
42(218 *)410.2 504 R(name.)4.2 E 42(219 */)410.2 512.4 R 37.8(220 for)
410.2 520.8 R(\(st = this; st != null; st = st.parent\) {)4.2 E(221)
410.2 529.2 Q 54.6(222 /*)410.2 537.6 R 58.8(223 *)410.2 546 R
(Just use get in the HashMap -- sweet.)4.2 E 58.8(224 */)410.2 554.4 R 0
Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(assignments/3/support-\214les)36 60 Q/F1 11
/Times-Bold@0 SF(SymbolT)208.618 E(able.ja)-1.012 E -.11(va)-.275 G F0
-.15(Pa)291.388 G(ge 3).15 E/F2 7/Courier@0 SF 54.6(225 if)40.2 92.4 R
(\(\(se = \(SymbolTableEntry\) entries.get\(name\)\) != null\) {)4.2 E
71.4(226 return)40.2 100.8 R(se;)4.2 E 54.6(227 })40.2 109.2 R 37.8
(228 })40.2 117.6 R(229)40.2 126 Q 37.8(230 /*)40.2 134.4 R 42(231 *)
40.2 142.8 R(Return null if symbol is found no where.)4.2 E 42(232 */)
40.2 151.2 R 37.8(233 return)40.2 159.6 R(null;)4.2 E(234)40.2 168 Q 21
(235 })40.2 176.4 R(236)40.2 184.8 Q 21(237 /**)40.2 193.2 R 25.2(238 *)
40.2 201.6 R(Lookup an entry by name in this symtab only.)4.2 E
(I.e., LookupLocal does not)8.4 E 25.2(239 *)40.2 210 R
(perform the parent-level search that is performed by Lookup.)4.2 E
(Otherwise,)8.4 E 25.2(240 *)40.2 218.4 R
(the specification is the same as Lookup.)4.2 E 25.2(241 *)40.2 226.8 R
(<p>)294 E 25.2(242 *)40.2 235.2 R(This version of lookup is intended t\
o model the closed scope resolution)4.2 E 25.2(243 *)40.2 243.6 R
(rule of most block structured programming languages.)4.2 E
(Viz., a reference)8.4 E 25.2(244 *)40.2 252 R(to a symbol within a clo\
sed scope is resolved by looking in the current)4.2 E 25.2(245 *)40.2
260.4 R(scope only, without subsequent checks in enclosing scopes.)4.2 E
25.2(246 */)40.2 268.8 R 21(247 public)40.2 277.2 R
(SymbolTableEntry lookupLocal\(String name\) {)4.2 E 37.8(248 return)
40.2 285.6 R(\(SymbolTableEntry\) entries.get\(name\);)4.2 E 21(249 })
40.2 294 R(250)40.2 302.4 Q 21(251 /**)40.2 310.8 R 25.2(252 *)40.2
319.2 R(Enter the given symtab entry into this symtab, if an entry of t\
hat name)4.2 E 25.2(253 *)40.2 327.6 R(does not already exist.)4.2 E
(True is returned if the entry was added, false)8.4 E 25.2(254 *)40.2
336 R(otherwise.)4.2 E 25.2(255 */)40.2 344.4 R 21(256 public)40.2 352.8
R(boolean enter\(SymbolTableEntry se\) {)4.2 E 37.8(257 if)40.2 361.2 R
(\(lookupLocal\(se.name\) != null\) {)4.2 E 54.6(258 return)40.2 369.6 R
(false;)4.2 E 37.8(259 })40.2 378 R 37.8(260 entries.put\(se.name,)40.2
386.4 R(se\);)4.2 E 37.8(261 return)40.2 394.8 R(true;)4.2 E 21(262 })
40.2 403.2 R(263)40.2 411.6 Q 21(264 /**)40.2 420 R 25.2(265 *)40.2
428.4 R(Move up one parent level from this symtab, returning a referenc\
e to the)4.2 E 25.2(266 *)40.2 436.8 R(new level.)4.2 E
(If the current level of this symtab has no parent \(i.e., it)8.4 E 25.2
(267 *)40.2 445.2 R(is at level 0\), then Ascend has no effect, i.e., i\
t returns a reference)4.2 E 25.2(268 *)40.2 453.6 R(to this.)4.2 E 25.2
(269 */)40.2 462 R 21(270 public)40.2 470.4 R(SymbolTable ascend\(\) {)
4.2 E 37.8(271 return)40.2 478.8 R(parent != null ? parent : this;)4.2 E
21(272 })40.2 487.2 R(273)40.2 495.6 Q 21(274 /**)40.2 504 R 25.2(275 *)
40.2 512.4 R
(Move down one level in this symtab, returning a reference to the new)
4.2 E 25.2(276 *)40.2 520.8 R 4.2(level. The)4.2 F
(level descended to is the one referenced by the symtab entry)4.2 E 25.2
(277 *)40.2 529.2 R
(of the given name, which must have scope field, i.e., it must be a)4.2
E 25.2(278 *)40.2 537.6 R 4.2(FunctionEntry. If)4.2 F
(no such entry exists, of if the given name is not)4.2 E 25.2(279 *)40.2
546 R(that of a FunctionEntry, then descend has no effect, i.e., it ret\
urns a)4.2 E 25.2(280 *)40.2 554.4 R(reference to this.)4.2 E 25.2
(281 */)410.2 92.4 R 21(282 public)410.2 100.8 R
(SymbolTable descend\(String name\) {)4.2 E 37.8(283 SymbolTableEntry)
410.2 109.2 R(se = lookupLocal\(name\);)4.2 E(284)410.2 117.6 Q 37.8
(285 try)410.2 126 R({)4.2 E 54.6(286 return)410.2 134.4 R 71.4
(287 \(\(se)410.2 142.8 R(== null\) ||)4.2 E 88.2(288 \(se.getClass\(\))
410.2 151.2 R(!= Class.forName\("FunctionEntry"\)\)\))4.2 E 71.4(289 ?)
410.2 159.6 R(this : \(\(FunctionEntry\) se\).scope;)4.2 E 37.8(290 })
410.2 168 R 37.8(291 catch)410.2 176.4 R(\(Exception e\) {)4.2 E
(// ClassNotFound exceptin; this is a pain)12.6 E 54.6
(292 System.out.println\(e\);)410.2 184.8 R 54.6
(293 e.printStackTrace\(\);)410.2 193.2 R 54.6(294 return)410.2 201.6 R
(null;)4.2 E 37.8(295 })410.2 210 R 21(296 })410.2 218.4 R(297)410.2
226.8 Q 21(298 /**)410.2 235.2 R 25.2(299 *)410.2 243.6 R
(Dump out the contents of the given symbtab, dumping entries serially,)
4.2 E 25.2(300 *)410.2 252 R
(and recursively traversing into scoping levels.)4.2 E
(Empty entries are not)8.4 E 25.2(301 *)410.2 260.4 R 4.2(dumped. The)
4.2 F(serial order means that entries are dumped in the physical)4.2 E
25.2(302 *)410.2 268.8 R(order they appear in the table.)4.2 E
(Hence, if the entries are hashed, they)8.4 E 25.2(303 *)410.2 277.2 R
(will appear in the dump at their hashed entry positions, not sorted by)
4.2 E 25.2(304 *)410.2 285.6 R
(symbol name or other more useful/aesthetic order.)4.2 E 25.2(305 *)
410.2 294 R(<p>)294 E 25.2(306 *)410.2 302.4 R(As an example, the follo\
wing is a symtab dump for the sample program and)4.2 E 25.2(307 *)410.2
310.8 R(picture shown above:)4.2 E 25.2(308 *)410.2 319.2 R 25.2(309 *)
410.2 327.6 R(<pre><p>)273 E 37.8(310 Level)410.2 336 R 4.2(1S)4.2 G
(ymtab Contents:)-4.2 E 46.2(311 Entry)410.2 344.4 R
(7: Symbol: B, Type: 0x0)4.2 E 54.6(312 Formals:)410.2 352.8 R(b1,b2)4.2
E 54.6(313 Level)410.2 361.2 R 4.2(2S)4.2 G(ymtab Contents:)-4.2 E 63
(314 Entry)410.2 369.6 R(9: Symbol: b1, Type: 0x68760)4.2 E 63
(315 Entry)410.2 378 R(12: Symbol: b2, Type: 0x66312)4.2 E 63(316 Entry)
410.2 386.4 R(15: Symbol: b3, Type: 0x66312)4.2 E 63(317 Entry)410.2
394.8 R(18: Symbol: C, Type: 0x0)4.2 E 71.4(318 Formals:)410.2 403.2 R
(c1,c2)4.2 E 71.4(319 Level)410.2 411.6 R 4.2(3S)4.2 G(ymtab Contents:)
-4.2 E 79.8(320 Entry)410.2 420 R(20: Symbol: c1, Type: 0x66312)4.2 E
79.8(321 Entry)410.2 428.4 R(23: Symbol: c2, Type: 0x68760)4.2 E 79.8
(322 Entry)410.2 436.8 R(26: Symbol: c3, Type: 0x66312)4.2 E 46.2
(323 Entry)410.2 445.2 R(195: Symbol: p1, Type: 0x66312)4.2 E 46.2
(324 Entry)410.2 453.6 R(200: Symbol: p2, Type: 0x66312)4.2 E 46.2
(325 Entry)410.2 462 R(203: Symbol: p3, Type: 0x66312)4.2 E 46.2
(326 Entry)410.2 470.4 R(228: Symbol: A, Type: 0x0)4.2 E 54.6
(327 Parms:)410.2 478.8 R(a1,a2)4.2 E 54.6(328 Level)410.2 487.2 R 4.2
(2S)4.2 G(ymtab Contents:)-4.2 E 63(329 Entry)410.2 495.6 R
(39: Symbol: a1, Type: 0x66312)4.2 E 63(330 Entry)410.2 504 R
(42: Symbol: a2, Type: 0x68760)4.2 E 63(331 Entry)410.2 512.4 R
(52: Symbol: a3, Type: 0x66312)4.2 E 25.2(332 *)410.2 520.8 R(</pre><p>)
268.8 E 25.2(333 *)410.2 529.2 R 25.2(334 *)410.2 537.6 R
(The dump format of the type fields is an object memory address, for)4.2
E 25.2(335 *)410.2 546 R(brevity.)4.2 E 25.2(336 */)410.2 554.4 R 0 Cg
EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(assignments/3/support-\214les)36 60 Q/F1 11
/Times-Bold@0 SF(SymbolT)208.618 E(able.ja)-1.012 E -.11(va)-.275 G F0
-.15(Pa)291.388 G(ge 4).15 E/F2 7/Courier@0 SF 21(337 public)40.2 92.4 R
(void dump\(SymbolTable st\) {)4.2 E 37.8
(338 System.out.println\(toString\(\)\);)40.2 100.8 R 21(339 })40.2
109.2 R(340)40.2 117.6 Q 21(341 /**)40.2 126 R 25.2(342 *)40.2 134.4 R
(Produce the string value printed by dump.)4.2 E 25.2(343 */)40.2 142.8
R 21(344 public)40.2 151.2 R(String toString\(\) {)4.2 E 37.8
(345 return)40.2 159.6 R(toString\(this.level\);)4.2 E 21(346 })40.2 168
R(347)40.2 176.4 Q 21(348 /**)40.2 184.8 R 25.2(349 *)40.2 193.2 R
(Work doer for toString.)4.2 E
(The level parameter is used for indenting.)8.4 E 25.2(350 */)40.2 201.6
R 21(351 public)40.2 210 R(String toString\(int level\) {)4.2 E 37.8
(352 SymbolTableEntry)40.2 218.4 R(e;)4.2 E 37.8(353 String)40.2 226.8 R
(indent = "", output = "";)4.2 E 37.8(354 int)40.2 235.2 R
(nextLevel = level + 1;)4.2 E(355)40.2 243.6 Q 37.8(356 /*)40.2 252 R 42
(357 *)40.2 260.4 R(Indent per level.)4.2 E 42(358 */)40.2 268.8 R 37.8
(359 for)40.2 277.2 R(\(int i = 0; i < level; i++\) {)4.2 E 54.6
(360 indent)40.2 285.6 R(+= ")4.2 E(";)8.4 E 37.8(361 })40.2 294 R(362)
40.2 302.4 Q 37.8(363 /*)40.2 310.8 R 42(364 *)40.2 319.2 R
(Message at top of table.)4.2 E 42(365 */)40.2 327.6 R 37.8(366 output)
40.2 336 R
(+= "Level " + Integer.toString\(level\) + " Symtab Contents:\\n";)4.2 E
(367)40.2 344.4 Q 37.8(368 /*)40.2 352.8 R 42(369 *)40.2 361.2 R
(Serially traverse the entries and dump each.)4.2 E 42(370 */)40.2 369.6
R 37.8(371 for)40.2 378 R
(\(Iterator it = entries.values\(\).iterator\(\); it.hasNext\(\); \) {)
4.2 E 54.6(372 output)40.2 386.4 R
(+= \(\(SymbolTableEntry\)it.next\(\)\).toString\(nextLevel\) +)4.2 E
71.4(373 \(it.hasNext\(\))40.2 394.8 R 4.2(?")4.2 G(\\n" : ""\);)-4.2 E
37.8(374 })40.2 403.2 R(375)40.2 411.6 Q 37.8(376 return)40.2 420 R
(output;)4.2 E 21(377 })40.2 428.4 R(378)40.2 436.8 Q 21(379 /**)40.2
445.2 R
(The parent table in the tree structure, i.e., the symtab of this')4.2 E
25.2(380 *)40.2 453.6 R(enclosing scope.)4.2 E
(This is null for the level 0 symtab.)8.4 E 25.2(381 */)40.2 462 R 21
(382 public)40.2 470.4 R(SymbolTable parent;)4.2 E(383)40.2 478.8 Q 21
(384 /**)40.2 487.2 R(The hash table of entries */)4.2 E 21
(385 protected)40.2 495.6 R(HashMap entries;)4.2 E(386)40.2 504 Q 21
(387 /**)40.2 512.4 R
(Nesting level of this, starting with 0 at the top. */)4.2 E 21
(388 public)40.2 520.8 R(int level;)4.2 E(389)40.2 529.2 Q 4.2(390 })
40.2 537.6 R 0 Cg EP
%%Trailer
end
%%EOF
